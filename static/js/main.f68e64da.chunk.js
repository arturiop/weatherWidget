(this["webpackJsonpweather-widget"]=this["webpackJsonpweather-widget"]||[]).push([[0],{106:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(45),i=n.n(a),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},s=(n(106),n(10)),d=n(96),l=n(24),u=n(153),j=n(58),b=n(38),f="cities",x=function(e){var t=(e-273.15).toFixed(0);return"".concat(t,"\xb0")},p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},h=function(e){return"http://openweathermap.org/img/w/".concat(e,".png")},O=Object(j.b)({name:"weather",initialState:{citiesWeather:[],forecast:{},isLoading:!1,error:""},reducers:{deleteCity:function(e,t){var n=t.payload,r=e.citiesWeather.filter((function(e){return e.name!==n}));e.citiesWeather=r},setCity:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",function(e){var t=JSON.parse(localStorage.getItem(f)||"[]"),n=[e].concat(t);localStorage.setItem(f,JSON.stringify(n))}(n.name),e.citiesWeather=[n].concat(e.citiesWeather)},setCityFromLS:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",e.citiesWeather=[n].concat(e.citiesWeather)},setErrorAxiosError:function(e,t){var n=t.payload;e.isLoading=!1,e.error=n.response?n.response.data.message:"Unknown error"},setError:function(e,t){var n=t.payload;e.error=n},toggleLoading:function(e,t){var n=t.payload;e.isLoading=n},updateCityData:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",e.citiesWeather=e.citiesWeather.map((function(e){return e.id===n.id?n:e}))},setForecastCity:function(e,t){var n=t.payload;e.isLoading=!1,e.error="";var r=n.list.filter((function(e){return"5"===e.dt_txt[12]}));e.forecast=Object(b.a)(Object(b.a)({},n),{},{list:r})}}}),g=O.actions,m=g.deleteCity,y=(g.setCity,g.toggleLoading,g.setError),v=(g.updateCityData,O.reducer),w=Object(j.a)({reducer:{weather:v}}),C=n(145),S=n(146),k=n(148),L=n(149),z=n(5),W=n(154),E=n(152),R=n(20),I=n.n(R),_=n(35),F=n(91),D=n.n(F).a.create({baseURL:"".concat("https://api.openweathermap.org/data/2.5/")});D.interceptors.request.use((function(e){var t={q:e.params.city,appid:"".concat("f7716f96e99b9f931f2355dc4e411ecf")};return Object(b.a)(Object(b.a)({},e),{},{params:t})}),(function(e){return e}));var N=function(e){return D.get("weather",{params:{city:e}})},A=function(e){return D.get("forecast",{params:{city:e}})},J=n(2),T=function(){var e=Object(r.useState)(""),t=Object(z.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(z.a)(a,2),o=i[0],s=i[1],d=Object(l.b)(),u=function(){var e;s((function(){return!0})),d((e=n,function(){var t=Object(_.a)(I.a.mark((function t(n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(O.actions.toggleLoading(!0)),t.next=4,N(e);case 4:r=t.sent,JSON.parse(localStorage.getItem(f)||"[]").includes(r.data.name)?n(O.actions.updateCityData(r.data)):n(O.actions.setCity(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(O.actions.setErrorAxiosError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())),c(""),s((function(){return!1}))};return Object(J.jsx)(C.a,{children:Object(J.jsxs)(S.a,{children:[Object(J.jsx)(C.a,{borderLeftRadius:"xl",bgColor:"gray.300",children:Object(J.jsx)(W.a,{size:"sm",color:"gray.700",borderRightRadius:"none",placeholder:"City Name",value:n,onChange:function(e){c(e.target.value)}})}),Object(J.jsx)(E.a,{size:"sm",color:"gray.700",borderLeftRadius:"none",onClick:function(){return n.length<2?d(y("city name too short")):u()},disabled:o,children:"search"})]})})},M=function(){return Object(J.jsxs)(S.a,{paddingX:["1","6"],paddingY:["1","2","none"],bgColor:"#262624",color:"#c7c3b9",justify:"space-between",align:"center",children:[Object(J.jsx)(C.a,{display:["none","block"],children:Object(J.jsx)(k.a,{isExternal:!0,href:"https://cv.djinni.co/fe/19ab4e344c6c49451e5ae4dabbe56a/PiloianCV.pdf",children:"toCV"})}),Object(J.jsx)(L.a,{size:"md",padding:"1%",align:"center",children:"Weather"}),Object(J.jsx)(T,{})]})},P=function(e){var t=e.children;return Object(J.jsxs)(C.a,{bgColor:"#d9d6d0",minW:"280px",minH:"100vh",children:[Object(J.jsx)(C.a,{as:"header",position:"sticky",top:"0",zIndex:"9999",children:Object(J.jsx)(M,{})}),Object(J.jsx)(C.a,{as:"main",children:t})]})},Y=l.c,B=n(151),U=n(150),V=n(155),X=n(54),q=n.n(X),H=function(e){var t=e.dayWeather,n=e.index,r=t.main,c=r.temp_min,a=r.temp_max,i=q()(t.dt_txt.substring(0,10)).format("dddd"),o=x(c),s=x(a),d=p(t.weather[0].description),l=t.weather[0].icon,u=h(l);return Object(J.jsxs)(S.a,{paddingX:"2",bgColor:n%2===0?"#d9d6d0":"",justify:"space-between",align:"center",children:[Object(J.jsxs)(C.a,{children:[Object(J.jsx)(L.a,{size:"sm",children:i}),Object(J.jsx)(U.a,{fontSize:"0.75rem",color:"gray.700",children:d})]}),Object(J.jsx)(C.a,{children:Object(J.jsx)(V.a,{h:"100%",src:u,alt:d})}),Object(J.jsxs)(C.a,{children:[Object(J.jsx)(U.a,{children:s}),Object(J.jsx)(U.a,{children:o})]})]})},Q=function(e){var t=e.data;Object(r.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[t]);var n=t.list.map((function(e,t){return Object(J.jsx)(H,{index:t,dayWeather:e},e.dt_txt)})),c=Object(r.useMemo)((function(){return n}),[t.list]);return Object(J.jsx)(B.a,{initialScale:.8,in:!0,children:Object(J.jsx)(C.a,{minW:["none",null,"400px"],children:Object(J.jsxs)(C.a,{borderRadius:"md",borderColor:"gray.700",border:"1px",bgColor:"white",margin:"2",padding:"2",children:[Object(J.jsxs)(L.a,{textAlign:"center",size:"md",children:["Forecast"," ",t.city.name]}),c]})})})},G=function(){var e=Y((function(e){return e.weather.error}));return Object(J.jsx)(C.a,{display:e?"block":"none",children:Object(J.jsx)(L.a,{textDecoration:"underline",textAlign:"center",size:"sm",color:"red.500",children:e})})},K=n(156),Z=Object(K.a)({displayName:"DropIcon",viewBox:"0 0 20 20",path:Object(J.jsxs)("g",{children:[Object(J.jsx)("path",{fillRule:"evenodd",d:"M7.21.8C7.69.295 8 0 8 0c.109.363.234.708.371 1.038.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8zm.413 1.021A31.25 31.25 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}),Object(J.jsx)("path",{fillRule:"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87l-.894-.448z"})]})}),$=function(e){var t=e.feelsLike,n=e.speed,r=e.humidity,c="Feels like: ".concat(x(t)),a="Wind: ".concat(n," m/sec"),i="".concat(r," %");return Object(J.jsxs)(S.a,{marginTop:"1",padding:["2","4"],borderRadius:"xl",bgColor:"#404040",justify:"space-between",children:[Object(J.jsxs)(S.a,{align:"center",children:[Object(J.jsx)(Z,{}),Object(J.jsx)(U.a,{fontSize:["xs","md"],children:i})]}),Object(J.jsx)(U.a,{fontSize:["xs","md"],children:a}),Object(J.jsx)(U.a,{fontSize:["xs","md"],children:c})]})},ee=function(e){var t=e.city,n=e.update,c=e.deleteCity,a=e.forecastCity,i=Object(r.useState)(!1),o=Object(z.a)(i,2),s=o[0],d=o[1],l=t.main,u=l.temp,j=l.humidity,b=l.feels_like,f=t.weather,O=t.name,g=t.sys,m=t.wind,y=q()().utcOffset(t.timezone/60),v=y.format("dddd"),w=y.format("DD MMM YYYY"),k=x(u),W=p(f.map((function(e){return e.description})).join(", ")),R=h(f[0].icon),F=function(){var e=Object(_.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),a(t.name);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsx)(C.a,{minW:["280px","none","400px","550px"],children:Object(J.jsxs)(S.a,{color:"#e8e3e3",borderRadius:"2xl",onClick:function(){return d(!s)},margin:"2",padding:"4",flexDirection:"column",bgColor:"#242323",children:[Object(J.jsxs)(C.a,{padding:"4",borderRadius:"xl",bgColor:"#404040",children:[Object(J.jsxs)(S.a,{direction:["column","row"],justify:"space-between",children:[Object(J.jsxs)(C.a,{align:"center",children:[Object(J.jsx)(L.a,{isTruncated:!0,children:O}),Object(J.jsx)(U.a,{children:g.country})]}),Object(J.jsx)(C.a,{display:["none","block"],children:Object(J.jsx)(V.a,{h:"100%",src:R,alt:W})}),Object(J.jsxs)(C.a,{align:"center",children:[Object(J.jsx)(L.a,{size:"lg",children:v}),Object(J.jsx)(U.a,{children:w})]})]}),Object(J.jsx)(S.a,{justify:"space-around",alignItems:"center",children:Object(J.jsx)(L.a,{size:"2xl",children:k})}),Object(J.jsx)(L.a,{isTruncated:!0,size:"md",textAlign:"center",children:W})]}),s?Object(J.jsx)($,{speed:m.speed,feelsLike:b,humidity:j}):null,Object(J.jsxs)(S.a,{color:"#242323",marginTop:"2",justify:"space-around",align:"center",children:[Object(J.jsx)(E.a,{onClick:F,children:"forecast"}),Object(J.jsx)(E.a,{marginX:"2",onClick:function(e){e.stopPropagation(),n(O)},children:"update"}),Object(J.jsx)(E.a,{onClick:function(e){e.stopPropagation(),c(t.name)},colorScheme:"red",children:"delete"})]})]})})},te=Object(r.memo)(ee),ne=function(){var e=Y((function(e){return e.weather.citiesWeather})),t=Object(l.b)(),n=function(e){var n;t((n=e,function(){var e=Object(_.a)(I.a.mark((function e(t){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(O.actions.toggleLoading(!0)),e.next=4,N(n);case 4:r=e.sent,t(O.actions.toggleLoading(!0)),t(O.actions.updateCityData(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(O.actions.setError(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},c=function(e){t(m(e)),function(e,t){var n=JSON.parse(localStorage.getItem(f)||"[]").filter((function(e){return e!==t}));localStorage.setItem(e,JSON.stringify(n))}(f,e)},a=function(e){t(function(e){return function(){var t=Object(_.a)(I.a.mark((function t(n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(O.actions.toggleLoading(!0)),t.next=4,A(e);case 4:r=t.sent,n(O.actions.setForecastCity(r.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(O.actions.setErrorAxiosError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))},i=e.map((function(e){return Object(J.jsx)(B.a,{initialScale:.8,in:!0,children:Object(J.jsx)(te,{deleteCity:c,update:n,city:e,forecastCity:a},e.id)},"scale_".concat(e.id))})),o=Object(r.useMemo)((function(){return i}),[e]);return Object(J.jsx)(C.a,{maxW:["100%","100%","500px"],children:o})},re=n(93),ce=n.n(re),ae=function(){return Object(J.jsxs)("div",{className:ce.a.ldsRing,children:[Object(J.jsx)("div",{}),Object(J.jsx)("div",{}),Object(J.jsx)("div",{}),Object(J.jsx)("div",{})]})},ie=function(){var e=Y((function(e){return e.weather})),t=e.forecast,n=e.isLoading,c=Object(r.useState)(n),a=Object(z.a)(c,2),i=a[0],o=a[1],s=Object(l.b)();return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem(f)||"[]");e.length&&e.map((function(e){return s(function(e){return function(){var t=Object(_.a)(I.a.mark((function t(n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(O.actions.toggleLoading(!0)),t.next=4,N(e);case 4:r=t.sent,n(O.actions.setCityFromLS(r.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(O.actions.setErrorAxiosError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))}))}),[]),Object(r.useEffect)((function(){n&&(o(!0),setTimeout((function(){return o(!1)}),500))}),[n]),Object(J.jsxs)(C.a,{children:[Object(J.jsx)(S.a,{position:"fixed",top:["12","20"],right:"2",zIndex:"999",children:Object(J.jsx)(G,{})}),Object(J.jsx)(C.a,{w:"100%",position:"fixed",top:"20",left:"40%",zIndex:"999",children:i?Object(J.jsx)(ae,{}):null}),Object(J.jsxs)(S.a,{direction:["column",null,"row"],justify:"space-around",children:[Object(J.jsx)(C.a,{maxW:["100%",null,"550px"],children:"{}"!==JSON.stringify(t)?Object(J.jsx)(Q,{data:t}):null}),Object(J.jsx)(ne,{})]})]})},oe=function(){return Object(J.jsx)(P,{children:Object(J.jsxs)(s.d,{children:[Object(J.jsx)(s.b,{exact:!0,path:"/",render:function(){return Object(J.jsx)(s.a,{to:"/weather-widgets"})}}),Object(J.jsx)(s.b,{path:"/weather-widgets",render:function(){return Object(J.jsx)(ie,{})}})]})})},se=function(){return Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(u.a,{children:Object(J.jsx)(d.a,{children:Object(J.jsx)(l.a,{store:w,children:Object(J.jsx)(oe,{})})})})})};i.a.render(Object(J.jsx)(se,{}),document.getElementById("root")),o()},93:function(e,t,n){e.exports={ldsRing:"preloader_ldsRing__LoOns","lds-ring":"preloader_lds-ring__1VxQT"}}},[[132,1,2]]]);
//# sourceMappingURL=main.f68e64da.chunk.js.map