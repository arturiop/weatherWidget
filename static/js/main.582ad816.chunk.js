(this["webpackJsonpweather-widget"]=this["webpackJsonpweather-widget"]||[]).push([[0],{107:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(27),i=n.n(a),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},s=(n(107),n(6)),d=n(73),u=n(19),l=n(15),j=n(41),b=n(23),h="cities",x=function(e){var t=(e-273.15).toFixed(0);return"".concat(t,"\xb0")},O=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},f=function(e){return"http://openweathermap.org/img/w/".concat(e,".png")},p=Object(j.b)({name:"weather",initialState:{citiesWeather:[],forecast:{},isLoading:!1,error:""},reducers:{deleteCity:function(e,t){var n=t.payload,r=e.citiesWeather.filter((function(e){return e.name!==n}));e.citiesWeather=r},setCity:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",function(e){var t=JSON.parse(localStorage.getItem(h)||"[]"),n=[e].concat(t);localStorage.setItem(h,JSON.stringify(n))}(n.name),e.citiesWeather=[n].concat(e.citiesWeather)},setCityFromLS:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",e.citiesWeather=[n].concat(e.citiesWeather)},setErrorAxiosError:function(e,t){var n=t.payload;e.isLoading=!1,e.error=n.response?n.response.data.message:"Unknown error"},setError:function(e,t){var n=t.payload;e.error=n},toggleLoading:function(e,t){var n=t.payload;e.isLoading=n},updateCityData:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",e.citiesWeather=e.citiesWeather.map((function(e){return e.id===n.id?n:e}))},setForecastCity:function(e,t){var n=t.payload;e.isLoading=!1,e.error="";var r=n.list.filter((function(e){return"5"===e.dt_txt[12]}));e.forecast=Object(b.a)(Object(b.a)({},n),{},{list:r})}}}),g=p.actions,m=g.deleteCity,v=(g.setCity,g.toggleLoading,g.setError),y=(g.updateCityData,p.reducer),C=Object(j.a)({reducer:{weather:y}}),S=n(59),w=n(28),_=n(63),E=n(64),L=n(29),A=n(17),W=n.n(A),R=n(69),T=n.n(R).a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/weatherWidget",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL)});T.interceptors.request.use((function(e){var t={q:e.params.city,appid:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/weatherWidget",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY)};return Object(b.a)(Object(b.a)({},e),{},{params:t})}),(function(e){return e}));var k=function(e){return T.get("weather",{params:{city:e}})},z=function(e){return T.get("forecast",{params:{city:e}})},P=n(3),D=function(){var e=Object(r.useState)(""),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(w.a)(a,2),o=i[0],s=i[1],d=Object(u.b)(),l=function(){var e;s((function(){return!0})),d((e=n,function(){var t=Object(L.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(p.actions.toggleLoading(!0)),t.next=4,k(e);case 4:r=t.sent,JSON.parse(localStorage.getItem(h)||"[]").includes(r.data.name)?n(p.actions.updateCityData(r.data)):n(p.actions.setCity(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(p.actions.setErrorAxiosError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())),c(""),s((function(){return!1}))};return Object(P.jsx)(S.a,{children:Object(P.jsxs)(S.b,{children:[Object(P.jsx)(S.a,{borderLeftRadius:"xl",bgColor:"gray.300",children:Object(P.jsx)(_.a,{size:"sm",color:"gray.700",borderRightRadius:"none",placeholder:"City Name",value:n,onChange:function(e){c(e.target.value)}})}),Object(P.jsx)(E.a,{size:"sm",color:"gray.700",borderLeftRadius:"none",onClick:function(){return n.length<2?d(v("city name too short")):l()},disabled:o,children:"search"})]})})},I=function(){return Object(P.jsxs)(S.b,{paddingX:["1","6"],paddingY:["1","2","none"],bgColor:"#262624",color:"#c7c3b9",justify:"space-between",align:"center",children:[Object(P.jsx)(S.a,{display:["none","block"],children:Object(P.jsx)(S.d,{isExternal:!0,href:"https://cv.djinni.co/fe/19ab4e344c6c49451e5ae4dabbe56a/PiloianCV.pdf",children:"toCV"})}),Object(P.jsx)(S.c,{size:"md",padding:"1%",align:"center",children:"Weather"}),Object(P.jsx)(D,{})]})},N=function(e){var t=e.children;return Object(P.jsxs)(S.a,{bgColor:"#d9d6d0",minW:"280px",minH:"100vh",children:[Object(P.jsx)(S.a,{as:"header",position:"sticky",top:"0",zIndex:"9999",children:Object(P.jsx)(I,{})}),Object(P.jsx)(S.a,{as:"main",children:t})]})},F=u.c,J=n(66),U=n(65),H=n(40),M=n.n(H),K=function(e){var t=e.dayWeather,n=e.index,r=t.main,c=r.temp_min,a=r.temp_max,i=M()(t.dt_txt.substring(0,10)).format("dddd"),o=x(c),s=x(a),d=O(t.weather[0].description),u=t.weather[0].icon,l=f(u);return Object(P.jsxs)(S.b,{paddingX:"2",bgColor:n%2===0?"#d9d6d0":"",justify:"space-between",align:"center",children:[Object(P.jsxs)(S.a,{children:[Object(P.jsx)(S.c,{size:"sm",children:i}),Object(P.jsx)(S.e,{fontSize:"0.75rem",color:"gray.700",children:d})]}),Object(P.jsx)(S.a,{children:Object(P.jsx)(U.a,{h:"100%",src:l,alt:d})}),Object(P.jsxs)(S.a,{children:[Object(P.jsx)(S.e,{children:s}),Object(P.jsx)(S.e,{children:o})]})]})},V=function(e){var t=e.data;Object(r.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[t]);var n=t.list.map((function(e,t){return Object(P.jsx)(K,{index:t,dayWeather:e},e.dt_txt)})),c=Object(r.useMemo)((function(){return n}),[t.list]);return Object(P.jsx)(J.a,{initialScale:.8,in:!0,children:Object(P.jsx)(S.a,{minW:["none",null,"400px"],children:Object(P.jsxs)(S.a,{borderRadius:"md",borderColor:"gray.700",border:"1px",bgColor:"white",margin:"2",padding:"2",children:[Object(P.jsxs)(S.c,{textAlign:"center",size:"md",children:["Forecast"," ",t.city.name]}),c]})})})},Y=function(){var e=F((function(e){return e.weather.error}));return Object(P.jsx)(S.a,{display:e?"block":"none",children:Object(P.jsx)(S.c,{textDecoration:"underline",textAlign:"center",size:"sm",color:"red.500",children:e})})},B=n(30),q=Object(B.b)({displayName:"DropIcon",viewBox:"0 0 20 20",path:Object(P.jsxs)("g",{children:[Object(P.jsx)("path",{fillRule:"evenodd",d:"M7.21.8C7.69.295 8 0 8 0c.109.363.234.708.371 1.038.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8zm.413 1.021A31.25 31.25 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}),Object(P.jsx)("path",{fillRule:"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87l-.894-.448z"})]})}),X=function(e){var t=e.feelsLike,n=e.speed,r=e.humidity,c="Feels like: ".concat(x(t)),a="Wind: ".concat(n," m/sec"),i="".concat(r," %");return Object(P.jsxs)(S.b,{marginTop:"1",padding:["2","4"],borderRadius:"xl",bgColor:"#404040",justify:"space-between",children:[Object(P.jsxs)(S.b,{align:"center",children:[Object(P.jsx)(q,{}),Object(P.jsx)(S.e,{fontSize:["xs","md"],children:i})]}),Object(P.jsx)(S.e,{fontSize:["xs","md"],children:a}),Object(P.jsx)(S.e,{fontSize:["xs","md"],children:c})]})},Q=function(e){var t=e.city,n=e.update,c=e.deleteCity,a=e.forecastCity,i=Object(r.useState)(!1),o=Object(w.a)(i,2),s=o[0],d=o[1],u=t.main,l=u.temp,j=u.humidity,b=u.feels_like,h=t.weather,p=t.name,g=t.sys,m=t.wind,v=M()().utcOffset(t.timezone/60),y=v.format("dddd"),C=v.format("DD MMM YYYY"),_=x(l),A=O(h.map((function(e){return e.description})).join(", ")),R=f(h[0].icon),T=function(){var e=Object(L.a)(W.a.mark((function e(n){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),a(t.name);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)(S.a,{minW:["280px","none","400px","550px"],children:Object(P.jsxs)(S.b,{color:"#e8e3e3",borderRadius:"2xl",onClick:function(){return d(!s)},margin:"2",padding:"4",flexDirection:"column",bgColor:"#242323",children:[Object(P.jsxs)(S.a,{padding:"4",borderRadius:"xl",bgColor:"#404040",children:[Object(P.jsxs)(S.b,{direction:["column","row"],justify:"space-between",children:[Object(P.jsxs)(S.a,{align:"center",children:[Object(P.jsx)(S.c,{isTruncated:!0,children:p}),Object(P.jsx)(S.e,{children:g.country})]}),Object(P.jsx)(S.a,{display:["none","block"],children:Object(P.jsx)(U.a,{h:"100%",src:R,alt:A})}),Object(P.jsxs)(S.a,{align:"center",children:[Object(P.jsx)(S.c,{size:"lg",children:y}),Object(P.jsx)(S.e,{children:C})]})]}),Object(P.jsx)(S.b,{justify:"space-around",alignItems:"center",children:Object(P.jsx)(S.c,{size:"2xl",children:_})}),Object(P.jsx)(S.c,{isTruncated:!0,size:"md",textAlign:"center",children:A})]}),s?Object(P.jsx)(X,{speed:m.speed,feelsLike:b,humidity:j}):null,Object(P.jsxs)(S.b,{color:"#242323",marginTop:"2",justify:"space-around",align:"center",children:[Object(P.jsx)(E.a,{onClick:T,children:"forecast"}),Object(P.jsx)(E.a,{marginX:"2",onClick:function(e){e.stopPropagation(),n(p)},children:"update"}),Object(P.jsx)(E.a,{onClick:function(e){e.stopPropagation(),c(t.name)},colorScheme:"red",children:"delete"})]})]})})},G=Object(r.memo)(Q),Z=function(){var e=F((function(e){return e.weather.citiesWeather})),t=Object(u.b)(),n=function(e){var n;t((n=e,function(){var e=Object(L.a)(W.a.mark((function e(t){var r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(p.actions.toggleLoading(!0)),e.next=4,k(n);case 4:r=e.sent,t(p.actions.toggleLoading(!0)),t(p.actions.updateCityData(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(p.actions.setError(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},c=function(e){t(m(e)),function(e,t){var n=JSON.parse(localStorage.getItem(h)||"[]").filter((function(e){return e!==t}));localStorage.setItem(e,JSON.stringify(n))}(h,e)},a=function(e){t(function(e){return function(){var t=Object(L.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(p.actions.toggleLoading(!0)),t.next=4,z(e);case 4:r=t.sent,n(p.actions.setForecastCity(r.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(p.actions.setErrorAxiosError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))},i=e.map((function(e){return Object(P.jsx)(J.a,{initialScale:.8,in:!0,children:Object(P.jsx)(G,{deleteCity:c,update:n,city:e,forecastCity:a},e.id)},"scale_".concat(e.id))})),o=Object(r.useMemo)((function(){return i}),[e]);return Object(P.jsx)(S.a,{maxW:["100%","100%","500px"],children:o})},$=n(71),ee=n.n($),te=function(){return Object(P.jsxs)("div",{className:ee.a.ldsRing,children:[Object(P.jsx)("div",{}),Object(P.jsx)("div",{}),Object(P.jsx)("div",{}),Object(P.jsx)("div",{})]})},ne=function(e){var t=e.botName,n=e.buttonSize,r=void 0===n?"large":n,c=e.cornerRadius,a=void 0===c?8:c,i=e.requestAccess,o=void 0===i?"write":i,s=e.usePic,d=void 0!==s&&s,u=(e.dataOnauth,e.dataAuthUrl),l=e.lang,j=void 0===l?"en":l,b=e.widgetVersion,h=void 0===b?15:b,x=document.createElement("script");return x.src="https://telegram.org/js/telegram-widget.js?".concat(h),x.setAttribute("data-telegram-login",t),x.setAttribute("data-size",r),void 0!==a&&x.setAttribute("data-radius",String(a)),x.setAttribute("data-request-access",o),x.setAttribute("data-userpic",String(d)),x.setAttribute("data-lang",j),void 0!==u?x.setAttribute("data-auth-url",u):x.setAttribute("data-onauth","TelegramLoginWidget.dataOnauth(user)"),x.async=!0,Object(P.jsx)("div",{children:x})},re=function(){var e=F((function(e){return e.weather})),t=e.forecast,n=e.isLoading,c=Object(r.useState)(n),a=Object(w.a)(c,2),i=a[0],o=a[1],s=Object(u.b)();Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem(h)||"[]");e.length&&e.map((function(e){return s(function(e){return function(){var t=Object(L.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(p.actions.toggleLoading(!0)),t.next=4,k(e);case 4:r=t.sent,n(p.actions.setCityFromLS(r.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(p.actions.setErrorAxiosError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))}))}),[]),Object(r.useEffect)((function(){n&&(o(!0),setTimeout((function(){return o(!1)}),500))}),[n]);return Object(P.jsxs)(S.a,{children:[Object(P.jsx)(ne,{dataOnauth:function(e){console.log(e)},botName:"SCHart_bot",lang:"en"}),Object(P.jsx)(S.b,{position:"fixed",top:["12","20"],right:"2",zIndex:"999",children:Object(P.jsx)(Y,{})}),Object(P.jsx)(S.a,{w:"100%",position:"fixed",top:"20",left:"40%",zIndex:"999",children:i?Object(P.jsx)(te,{}):null}),Object(P.jsxs)(S.b,{direction:["column",null,"row"],justify:"space-around",children:[Object(P.jsx)(S.a,{maxW:["100%",null,"550px"],children:"{}"!==JSON.stringify(t)?Object(P.jsx)(V,{data:t}):null}),Object(P.jsx)(Z,{})]})]})},ce=function(){return Object(P.jsx)(N,{children:Object(P.jsxs)(s.d,{children:[Object(P.jsx)(s.b,{exact:!0,path:"/",render:function(){return Object(P.jsx)(s.a,{to:"/weather-widgets"})}}),Object(P.jsx)(s.b,{path:"/weather-widgets",render:function(){return Object(P.jsx)(re,{})}})]})})},ae=function(){return Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(l.a,{children:Object(P.jsx)(d.a,{children:Object(P.jsx)(u.a,{store:C,children:Object(P.jsx)(ce,{})})})})})};i.a.render(Object(P.jsx)(ae,{}),document.getElementById("root")),o()},71:function(e,t,n){e.exports={ldsRing:"preloader_ldsRing__LoOns","lds-ring":"preloader_lds-ring__1VxQT"}}},[[135,1,2]]]);
//# sourceMappingURL=main.582ad816.chunk.js.map