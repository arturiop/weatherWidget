(this["webpackJsonpweather-widget"]=this["webpackJsonpweather-widget"]||[]).push([[0],{107:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(27),a=n.n(i),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))},s=(n(107),n(6)),d=n(73),l=n(19),u=n(15),j=n(41),b=n(23),x="cities",f=function(e){var t=(e-273.15).toFixed(0);return"".concat(t,"\xb0")},p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},h=function(e){return"http://openweathermap.org/img/w/".concat(e,".png")},O=Object(j.b)({name:"weather",initialState:{citiesWeather:[],forecast:{},isLoading:!1,error:""},reducers:{deleteCity:function(e,t){var n=t.payload,r=e.citiesWeather.filter((function(e){return e.name!==n}));e.citiesWeather=r},setCity:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",function(e){var t=JSON.parse(localStorage.getItem(x)||"[]"),n=[e].concat(t);localStorage.setItem(x,JSON.stringify(n))}(n.name),e.citiesWeather=[n].concat(e.citiesWeather)},setCityFromLS:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",e.citiesWeather=[n].concat(e.citiesWeather)},setErrorAxiosError:function(e,t){var n=t.payload;e.isLoading=!1,e.error=n.response?n.response.data.message:"Unknown error"},setError:function(e,t){var n=t.payload;e.error=n},toggleLoading:function(e,t){var n=t.payload;e.isLoading=n},updateCityData:function(e,t){var n=t.payload;e.isLoading=!1,e.error="",e.citiesWeather=e.citiesWeather.map((function(e){return e.id===n.id?n:e}))},setForecastCity:function(e,t){var n=t.payload;e.isLoading=!1,e.error="";var r=n.list.filter((function(e){return"5"===e.dt_txt[12]}));e.forecast=Object(b.a)(Object(b.a)({},n),{},{list:r})}}}),g=O.actions,m=g.deleteCity,v=(g.setCity,g.toggleLoading,g.setError),y=(g.updateCityData,O.reducer),C=Object(j.a)({reducer:{weather:y}}),S=n(59),w=n(28),_=n(63),E=n(64),L=n(29),W=n(17),k=n.n(W),R=n(69),T=n.n(R).a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/weatherWidget",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL)});T.interceptors.request.use((function(e){var t={q:e.params.city,appid:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/weatherWidget",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY)};return Object(b.a)(Object(b.a)({},e),{},{params:t})}),(function(e){return e}));var z=function(e){return T.get("weather",{params:{city:e}})},A=function(e){return T.get("forecast",{params:{city:e}})},D=n(3),P=function(){var e=Object(r.useState)(""),t=Object(w.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),a=Object(w.a)(i,2),o=a[0],s=a[1],d=Object(l.b)(),u=function(){var e;s((function(){return!0})),d((e=n,function(){var t=Object(L.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(O.actions.toggleLoading(!0)),t.next=4,z(e);case 4:r=t.sent,JSON.parse(localStorage.getItem(x)||"[]").includes(r.data.name)?n(O.actions.updateCityData(r.data)):n(O.actions.setCity(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(O.actions.setErrorAxiosError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())),c(""),s((function(){return!1}))};return Object(D.jsx)(S.a,{children:Object(D.jsxs)(S.b,{children:[Object(D.jsx)(S.a,{borderLeftRadius:"xl",bgColor:"gray.300",children:Object(D.jsx)(_.a,{size:"sm",color:"gray.700",borderRightRadius:"none",placeholder:"City Name",value:n,onChange:function(e){c(e.target.value)}})}),Object(D.jsx)(E.a,{size:"sm",color:"gray.700",borderLeftRadius:"none",onClick:function(){return n.length<2?d(v("city name too short")):u()},disabled:o,children:"search"})]})})},I=function(){return Object(D.jsxs)(S.b,{paddingX:["1","6"],paddingY:["1","2","none"],bgColor:"#262624",color:"#c7c3b9",justify:"space-between",align:"center",children:[Object(D.jsx)(S.a,{display:["none","block"],children:Object(D.jsx)(S.d,{isExternal:!0,href:"https://cv.djinni.co/fe/19ab4e344c6c49451e5ae4dabbe56a/PiloianCV.pdf",children:"toCV"})}),Object(D.jsx)(S.c,{size:"md",padding:"1%",align:"center",children:"Weather"}),Object(D.jsx)(P,{})]})},F=function(e){var t=e.children;return Object(D.jsxs)(S.a,{bgColor:"#d9d6d0",minW:"280px",minH:"100vh",children:[Object(D.jsx)(S.a,{as:"header",position:"sticky",top:"0",zIndex:"9999",children:Object(D.jsx)(I,{})}),Object(D.jsx)(S.a,{as:"main",children:t})]})},N=l.c,J=n(66),M=n(65),U=n(40),H=n.n(U),K=function(e){var t=e.dayWeather,n=e.index,r=t.main,c=r.temp_min,i=r.temp_max,a=H()(t.dt_txt.substring(0,10)).format("dddd"),o=f(c),s=f(i),d=p(t.weather[0].description),l=t.weather[0].icon,u=h(l);return Object(D.jsxs)(S.b,{paddingX:"2",bgColor:n%2===0?"#d9d6d0":"",justify:"space-between",align:"center",children:[Object(D.jsxs)(S.a,{children:[Object(D.jsx)(S.c,{size:"sm",children:a}),Object(D.jsx)(S.e,{fontSize:"0.75rem",color:"gray.700",children:d})]}),Object(D.jsx)(S.a,{children:Object(D.jsx)(M.a,{h:"100%",src:u,alt:d})}),Object(D.jsxs)(S.a,{children:[Object(D.jsx)(S.e,{children:s}),Object(D.jsx)(S.e,{children:o})]})]})},Y=function(e){var t=e.data;Object(r.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[t]);var n=t.list.map((function(e,t){return Object(D.jsx)(K,{index:t,dayWeather:e},e.dt_txt)})),c=Object(r.useMemo)((function(){return n}),[t.list]);return Object(D.jsx)(J.a,{initialScale:.8,in:!0,children:Object(D.jsx)(S.a,{minW:["none",null,"400px"],children:Object(D.jsxs)(S.a,{borderRadius:"md",borderColor:"gray.700",border:"1px",bgColor:"white",margin:"2",padding:"2",children:[Object(D.jsxs)(S.c,{textAlign:"center",size:"md",children:["Forecast"," ",t.city.name]}),c]})})})},B=function(){var e=N((function(e){return e.weather.error}));return Object(D.jsx)(S.a,{display:e?"block":"none",children:Object(D.jsx)(S.c,{textDecoration:"underline",textAlign:"center",size:"sm",color:"red.500",children:e})})},V=n(30),X=Object(V.b)({displayName:"DropIcon",viewBox:"0 0 20 20",path:Object(D.jsxs)("g",{children:[Object(D.jsx)("path",{fillRule:"evenodd",d:"M7.21.8C7.69.295 8 0 8 0c.109.363.234.708.371 1.038.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8zm.413 1.021A31.25 31.25 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}),Object(D.jsx)("path",{fillRule:"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87l-.894-.448z"})]})}),q=function(e){var t=e.feelsLike,n=e.speed,r=e.humidity,c="Feels like: ".concat(f(t)),i="Wind: ".concat(n," m/sec"),a="".concat(r," %");return Object(D.jsxs)(S.b,{marginTop:"1",padding:["2","4"],borderRadius:"xl",bgColor:"#404040",justify:"space-between",children:[Object(D.jsxs)(S.b,{align:"center",children:[Object(D.jsx)(X,{}),Object(D.jsx)(S.e,{fontSize:["xs","md"],children:a})]}),Object(D.jsx)(S.e,{fontSize:["xs","md"],children:i}),Object(D.jsx)(S.e,{fontSize:["xs","md"],children:c})]})},Q=function(e){var t=e.city,n=e.update,c=e.deleteCity,i=e.forecastCity,a=Object(r.useState)(!1),o=Object(w.a)(a,2),s=o[0],d=o[1],l=t.main,u=l.temp,j=l.humidity,b=l.feels_like,x=t.weather,O=t.name,g=t.sys,m=t.wind,v=H()().utcOffset(t.timezone/60),y=v.format("dddd"),C=v.format("DD MMM YYYY"),_=f(u),W=p(x.map((function(e){return e.description})).join(", ")),R=h(x[0].icon),T=function(){var e=Object(L.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),i(t.name);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(S.a,{minW:["280px","none","400px","550px"],children:Object(D.jsxs)(S.b,{color:"#e8e3e3",borderRadius:"2xl",onClick:function(){return d(!s)},margin:"2",padding:"4",flexDirection:"column",bgColor:"#242323",children:[Object(D.jsxs)(S.a,{padding:"4",borderRadius:"xl",bgColor:"#404040",children:[Object(D.jsxs)(S.b,{direction:["column","row"],justify:"space-between",children:[Object(D.jsxs)(S.a,{align:"center",children:[Object(D.jsx)(S.c,{isTruncated:!0,children:O}),Object(D.jsx)(S.e,{children:g.country})]}),Object(D.jsx)(S.a,{display:["none","block"],children:Object(D.jsx)(M.a,{h:"100%",src:R,alt:W})}),Object(D.jsxs)(S.a,{align:"center",children:[Object(D.jsx)(S.c,{size:"lg",children:y}),Object(D.jsx)(S.e,{children:C})]})]}),Object(D.jsx)(S.b,{justify:"space-around",alignItems:"center",children:Object(D.jsx)(S.c,{size:"2xl",children:_})}),Object(D.jsx)(S.c,{isTruncated:!0,size:"md",textAlign:"center",children:W})]}),s?Object(D.jsx)(q,{speed:m.speed,feelsLike:b,humidity:j}):null,Object(D.jsxs)(S.b,{color:"#242323",marginTop:"2",justify:"space-around",align:"center",children:[Object(D.jsx)(E.a,{onClick:T,children:"forecast"}),Object(D.jsx)(E.a,{marginX:"2",onClick:function(e){e.stopPropagation(),n(O)},children:"update"}),Object(D.jsx)(E.a,{onClick:function(e){e.stopPropagation(),c(t.name)},colorScheme:"red",children:"delete"})]})]})})},G=Object(r.memo)(Q),Z=function(){var e=N((function(e){return e.weather.citiesWeather})),t=Object(l.b)(),n=function(e){var n;t((n=e,function(){var e=Object(L.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(O.actions.toggleLoading(!0)),e.next=4,z(n);case 4:r=e.sent,t(O.actions.toggleLoading(!0)),t(O.actions.updateCityData(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(O.actions.setError(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},c=function(e){t(m(e)),function(e,t){var n=JSON.parse(localStorage.getItem(x)||"[]").filter((function(e){return e!==t}));localStorage.setItem(e,JSON.stringify(n))}(x,e)},i=function(e){t(function(e){return function(){var t=Object(L.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(O.actions.toggleLoading(!0)),t.next=4,A(e);case 4:r=t.sent,n(O.actions.setForecastCity(r.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(O.actions.setErrorAxiosError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))},a=e.map((function(e){return Object(D.jsx)(J.a,{initialScale:.8,in:!0,children:Object(D.jsx)(G,{deleteCity:c,update:n,city:e,forecastCity:i},e.id)},"scale_".concat(e.id))})),o=Object(r.useMemo)((function(){return a}),[e]);return Object(D.jsx)(S.a,{maxW:["100%","100%","500px"],children:o})},$=n(71),ee=n.n($),te=function(){return Object(D.jsxs)("div",{className:ee.a.ldsRing,children:[Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{})]})},ne=function(){var e=N((function(e){return e.weather})),t=e.forecast,n=e.isLoading,c=Object(r.useState)(n),i=Object(w.a)(c,2),a=i[0],o=i[1],s=Object(l.b)();return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem(x)||"[]");e.length&&e.map((function(e){return s(function(e){return function(){var t=Object(L.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(O.actions.toggleLoading(!0)),t.next=4,z(e);case 4:r=t.sent,n(O.actions.setCityFromLS(r.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(O.actions.setErrorAxiosError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))}))}),[]),Object(r.useEffect)((function(){n&&(o(!0),setTimeout((function(){return o(!1)}),500))}),[n]),Object(D.jsxs)(S.a,{children:[Object(D.jsx)(S.b,{position:"fixed",top:["12","20"],right:"2",zIndex:"999",children:Object(D.jsx)(B,{})}),Object(D.jsx)(S.a,{w:"100%",position:"fixed",top:"20",left:"40%",zIndex:"999",children:a?Object(D.jsx)(te,{}):null}),Object(D.jsxs)(S.b,{direction:["column",null,"row"],justify:"space-around",children:[Object(D.jsx)(S.a,{maxW:["100%",null,"550px"],children:"{}"!==JSON.stringify(t)?Object(D.jsx)(Y,{data:t}):null}),Object(D.jsx)(Z,{})]})]})},re=function(){return Object(D.jsx)(F,{children:Object(D.jsxs)(s.d,{children:[Object(D.jsx)(s.b,{exact:!0,path:"/",render:function(){return Object(D.jsx)(s.a,{to:"/weather-widgets"})}}),Object(D.jsx)(s.b,{path:"/weather-widgets",render:function(){return Object(D.jsx)(ne,{})}})]})})},ce=function(){return Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(u.a,{children:Object(D.jsx)(d.a,{children:Object(D.jsx)(l.a,{store:C,children:Object(D.jsx)(re,{})})})})})};a.a.render(Object(D.jsx)(ce,{}),document.getElementById("root")),o()},71:function(e,t,n){e.exports={ldsRing:"preloader_ldsRing__LoOns","lds-ring":"preloader_lds-ring__1VxQT"}}},[[135,1,2]]]);
//# sourceMappingURL=main.ef367d28.chunk.js.map